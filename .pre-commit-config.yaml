---
repos:
  - repo: local
    hooks:
      - id: lint-shell
        name: "lint: shell (bash -n)"
        entry: bash -n
        language: system
        pass_filenames: true
        types: [shell]
        stages: [pre-push]

      - id: lint-yaml
        name: "lint: yaml (yamllint)"
        entry: uv tool run yamllint
        language: system
        pass_filenames: true
        types: [yaml]
        stages: [pre-commit]

      - id: lint-python
        name: "lint: python (ruff)"
        entry: uv tool run ruff check
        language: system
        pass_filenames: true
        types: [python]
        stages: [pre-commit]

      - id: lint-js
        name: "lint: js/ts (ESLint)"
        entry: bash -c "cd vscode-temple-linter && npx eslint"
        language: system
        pass_filenames: true
        types: [javascript]
        files: ^vscode-temple-linter/src/.*\.ts$
        stages: [pre-commit]

      - id: secure-secrets-scan
        name: "secure: secrets scan (detect-secrets)"
        entry: uv tool run detect-secrets scan
        language: system
        pass_filenames: true
        stages: [pre-commit]

      - id: test-python-affected
        name: "test: python (pytest)"
        entry: bash -c "uv tool run pytest"
        language: system
        pass_filenames: false
        types: [python]
        stages: [pre-commit]

      - id: validate-benchmarks
        name: "validate: benchmarks quick"
        entry: bash -c "cd temple && uv pip run pytest"
        language: system
        pass_filenames: false
        types: [python]
        stages: [pre-push]

      - id: build-docs
        name: "build: docs (sphinx)"
        entry: bash -c "cd temple-linter/docs && uv pip run sphinx-build -b html . _build/html"
        language: system
        pass_filenames: false
        types: [python, yaml, markdown]
        stages: [pre-push]
