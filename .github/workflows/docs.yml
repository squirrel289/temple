---
name: Docs

on:
  # Run on pushes to main and trusted branch patterns
  push:
    branches: [main, 'docs/**']
  # Run on pull request events (opened/synchronize/reopened) for PRs from any branch
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  docs-linter:
    runs-on: ubuntu-latest
    steps:
      - name: Temple Linter Python Environment Setup
        uses: ./.github/actions/setup-python
        with:
          python-version: '3.11'
          working-directory: temple-linter
          extras: "[docs]"
      - name: Build docs
        run: ./scripts/pre-commit/build-docs.sh
      - name: Lint docs
        run: ./scripts/pre-commit/lint-docs.sh
  docs-core:
    runs-on: ubuntu-latest
    steps:
      - name: Temple Core Python Environment Setup
        uses: ./.github/actions/setup-python
        with:
          python-version: '3.11'
          working-directory: temple
          extras: "[docs]"
      - name: Validate core docs exist
        working-directory: temple/docs
        run: echo 'âœ“ Core documentation files present:' && ls -1 *.md || echo 'No markdown docs found'
